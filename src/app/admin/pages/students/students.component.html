<main class="w-4/5 m-auto mt-10">
  <section class="w-full flex items-center justify-between">
    <h2 class="text-[36px] text-blue-medio">Estudiantes</h2>
    <div class="w-full flex justify-end items-center gap-9">
      <div class="w-[35%] relative">
        <input
          type="text"
          placeholder="Nombre del estudiante..."
          class="w-full h-full border-2 border-blue-white p-1 pl-3 rounded-xl placeholder:p-1 placeholder:text-primary-color outline-none text-primary-color"
          [(ngModel)]="studentNameText"
        />
        <div
          class="absolute bg-blue-white w-[80px] h-full rounded-xl right-0 top-0 flex items-center justify-center"
        >
          <img
            class="hover:cursor-pointer"
            src="assets/icons8-search-book-48 1.png"
            alt="search"
          />
        </div>
      </div>
      <button
        class="flex items-center justify-center gap-[5px] w-auto bg-primary-color text-blue-white font-bold p-1 pr-2 pl-2 rounded-[10px] hover:outline hover:outline-2 hover:outline-blue-white hover:bg-white hover:text-primary-color"
        (click)="openModal()"
      >
        Registrar Alumno
        <img class="" src="/assets/studentsAdd.png" alt="add" />
      </button>
      <a routerLink="/dashboard">
        <button
          class="flex items-center justify-center w-[150px] h-full bg-primary-color pt-2 pb-2 text-blue-white font-bold p-1 rounded-[10px] hover:bg-white hover:border-2 hover:border-blue-white hover:text-primary-color"
        >
          Volver
          <img src="/assets/return.png" alt="" />
        </button>
      </a>
    </div>
  </section>
  @if(students && students.length > 0) {
  <section class="mt-10 w-full">
    <table class="w-full border-separate" style="border-spacing: 0 25px">
      <thead class="">
        <tr class="">
          <th class="border-collapse text-left p-5 text-blue-strong">ID</th>
          <th class="border-collapse text-left p-5 text-blue-strong">Nombre</th>
          <th class="border-collapse text-left p-5 text-blue-strong">
            Matricula
          </th>
          <th class="border-collapse text-left p-5 text-blue-strong">
            Telefono
          </th>
          <th class="border-collapse text-left p-5 text-blue-strong">
            Direccion
          </th>
          <th class="border-collapse text-left p-5 text-blue-strong">
            Prestamos
          </th>
          <th class="border-collapse text-left p-5 text-blue-strong">
            Acciones
          </th>
        </tr>
      </thead>
      <tbody class="">
        @for(student of filterStudentsByName(); track student.id) {
        <tr class="hover:bg-blue-white hover:rounded-xl">
          <td
            class="border-l-2 border-l-blue-white border-b-2 border-b-blue-white border-t-2 border-t-blue-white rounded-l-lg border-collapse text-left p-5 text-primary-color"
          >
            {{ student.id }}
          </td>
          <td
            class="border-b-2 border-b-blue-white border-t-2 border-t-blue-white border-collapse text-left p-5 text-primary-color"
          >
            {{ student.name }} {{ student.lastname }}
          </td>
          <td
            class="border-b-2 border-b-blue-white border-t-2 border-t-blue-white border-collapse text-left p-5 text-primary-color"
          >
            {{ student.enrollmentNumber }}
          </td>
          <td
            class="border-b-2 border-b-blue-white border-t-2 border-t-blue-white border-collapse text-left p-5 text-primary-color"
          >
            {{ student.phone }}
          </td>
          <td
            class="border-b-2 border-b-blue-white border-t-2 border-t-blue-white border-collapse text-left p-5 text-primary-color"
          >
            {{ student.address }}
          </td>
          <td
            class="border-b-2 border-b-blue-white border-t-2 border-t-blue-white border-collapse text-left p-5 text-primary-color"
          >
            {{ student.countLoans }}
          </td>
          <td
            class="border-b-2 border-b-blue-white border-t-2 border-t-blue-white border-r-2 border-r-blue-white rounded-r-lg border-collapse text-left p-5 text-primary-color"
          >
            <button
              (click)="deleteStudent(student.id)"
              class="hover:cursor-pointer p-2"
            >
              <img
                ngSrc="assets/delete.png"
                alt="delete"
                height="30"
                width="30"
              />
            </button>
            <button
              (click)="updateStudent(student)"
              class="hover:cursor-pointer p-2"
            >
              <img ngSrc="assets/edit.png" alt="edit" height="30" width="30" />
            </button>
          </td>
        </tr>
        }
      </tbody>
    </table>
  </section>
  }
  <app-modal
    [showModal]="showModal"
    [student]="student"
    (close)="closeModal()"
  />
</main>
